       Fresh autocfg v1.3.0
       Fresh cc v1.0.97
   Compiling rust_dir v0.0.0 (/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir)
       Fresh libc v0.2.154
       Fresh num-traits v0.2.19
       Fresh f128_internal v0.2.2
       Fresh f128_input v0.2.1
       Fresh f128 v0.2.9
     Running `/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/build/rust_dir-213fe74684051e1d/build-script-build`
     Running `/home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/bin/cargo rustc --crate-name rust_dir --edition=2021 lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type staticlib --crate-type rlib --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 -C metadata=f91a9939a95dcc05 -C extra-filename=-f91a9939a95dcc05 --out-dir /home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps -C incremental=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/incremental -L dependency=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps --extern f128=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/libf128-98cbaa6913037a43.rmeta --extern libc=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/liblibc-a03fff7dee4d9130.rmeta -L native=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/build/f128_internal-bbb71a2e3b7f099c/out`
     Running `/home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/bin/cargo rustc --crate-name rust_dir --edition=2021 lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 --test -C metadata=60b075d5db1f6ce6 -C extra-filename=-60b075d5db1f6ce6 --out-dir /home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps -C incremental=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/incremental -L dependency=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps --extern f128=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/libf128-98cbaa6913037a43.rmeta --extern libc=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/liblibc-a03fff7dee4d9130.rmeta -L native=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/build/f128_internal-bbb71a2e3b7f099c/out`
      Fixing lib.rs
      Fixing lib.rs
warning: failed to automatically apply fixes suggested by rustc to crate `rust_dir`

after fixes were automatically applied the compiler reported errors within these files:

  * /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/pin.rs
  * lib.rs
  * src/lib/chdir_long.rs
  * src/lib/dirname_lgpl.rs
  * src/lib/open_safer.rs
  * src/lib/openat_safer.rs
  * src/lib/pipe_safer.rs
  * src/lib/printf.rs
  * src/lib/printf_args.rs
  * src/lib/printf_parse.rs
  * src/lib/save_cwd.rs
  * src/lib/savedir.rs
  * src/lib/sig_handler.rs
  * src/lib/xmalloc.rs
  * src/trees.rs
  * src/util.rs

This likely indicates a bug in either rustc or cargo itself,
and we would appreciate a bug report! You're likely to see 
a number of compiler warnings after this message which cargo
attempted to fix but failed. If you could open an issue at
https://github.com/rust-lang/rust/issues
quoting the full output of this command we'd be very appreciative!
Note that you may be able to make some more progress in the near-term
fixing code with the `--broken-code` flag

The following errors were reported:
error[E0106]: missing lifetime specifiers
 --> src/lib/open_safer.rs:6:31
  |
6 | pub type __builtin_va_list = [__va_list_tag; 1];
  |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
  |
help: consider introducing a named lifetime parameter
  |
6 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
  |                           ++++                 ++++++++

error[E0106]: missing lifetime specifiers
  --> src/lib/openat_safer.rs:11:31
   |
11 | pub type __builtin_va_list = [__va_list_tag; 1];
   |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
   |
help: consider introducing a named lifetime parameter
   |
11 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
   |                           ++++                 ++++++++

error[E0106]: missing lifetime specifiers
  --> src/lib/printf.rs:13:31
   |
13 | pub type __builtin_va_list = [__va_list_tag; 1];
   |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
   |
help: consider introducing a named lifetime parameter
   |
13 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
   |                           ++++                 ++++++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:17:23
   |
17 | pub type __sigval_t = sigval;
   |                       ^^^^^^ expected named lifetime parameter
   |
help: consider introducing a named lifetime parameter
   |
17 | pub type __sigval_t<'a> = sigval<'a>;
   |                    ++++         ++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:85:20
   |
85 |     pub si_sigval: sigval,
   |                    ^^^^^^ expected named lifetime parameter
   |
help: consider using the `'h60` lifetime
   |
85 |     pub si_sigval: sigval<'h60>,
   |                          ++++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:92:20
   |
92 |     pub si_sigval: sigval,
   |                    ^^^^^^ expected named lifetime parameter
   |
help: consider using the `'h60` lifetime
   |
92 |     pub si_sigval: sigval<'h60>,
   |                          ++++++

warning: unused label
  --> src/lib/chdir_long.rs:77:9
   |
77 |         'c_970: {
   |         ^^^^^^
   |
   = note: `#[warn(unused_labels)]` on by default

warning: unused label
   --> src/lib/chdir_long.rs:138:5
    |
138 |     'c_1569: {
    |     ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:164:5
    |
164 |     'c_1531: {
    |     ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:226:13
    |
226 |             'c_1360: {
    |             ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:252:13
    |
252 |             'c_1321: {
    |             ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:298:17
    |
298 |                 'c_1241: {
    |                 ^^^^^^^

warning: the feature `asm` has been stable since 1.59.0 and no longer requires an attribute to enable
 --> lib.rs:8:12
  |
8 | #![feature(asm)]
  |            ^^^
  |
  = note: `#[warn(stable_features)]` on by default

error[E0308]: mismatched types
   --> src/trees.rs:156:23
    |
156 |             dyn_tree: dyn_ltree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:157:26
    |
157 |             static_tree: static_ltree.as_ptr() as *mut _,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:158:25
    |
158 |             extra_bits: extra_lbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:170:23
    |
170 |             dyn_tree: dyn_dtree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:171:26
    |
171 |             static_tree: static_dtree.as_ptr() as *mut _,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:172:25
    |
172 |             extra_bits: extra_dbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:184:23
    |
184 |             dyn_tree: bl_tree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:185:26
    |
185 |             static_tree: 0 as *const ct_data as *mut ct_data,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut ct_data`

error[E0308]: mismatched types
   --> src/trees.rs:186:25
    |
186 |             extra_bits: extra_blbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
  --> src/lib/dirname_lgpl.rs:61:54
   |
61 |       let mut dir: &[core::cell::Cell<libc::c_char>] = std::cell::Cell::from_mut(&mut (malloc(
   |  __________________---------------------------------___^
   | |                  |
   | |                  expected due to this
62 | |         length
63 | |             .wrapping_add(append_dot as libc::c_ulong)
64 | |             .wrapping_add(1 as libc::c_int as libc::c_ulong),
65 | |     )));
   | |_______^ expected slice, found struct `Cell`
   |
   = note: expected reference `&[Cell<i8>]`
              found reference `&Cell<*mut c_void>`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
  --> src/lib/dirname_lgpl.rs:66:18
   |
66 |     if &(dir)[0].is_null() {
   |                  ^^^^^^^ method not found in `Cell<i8>`

error[E0308]: mismatched types
  --> src/lib/dirname_lgpl.rs:67:16
   |
55 | pub unsafe extern "C" fn mdir_name<'h0,'h1>(mut file: &'h0 [libc::c_char]) -> &'h1 core::cell::Cell<libc::c_char> {
   |                                                                               ----------------------------------- expected `&'h1 Cell<i8>` because of return type
...
67 |         return 0 as *mut libc::c_char;
   |                ^^^^^^^^^^^^^^^^^^^^^^ expected `&Cell<i8>`, found *-ptr
   |
   = note: expected reference `&'h1 Cell<i8>`
            found raw pointer `*mut i8`

error[E0308]: mismatched types
    --> src/lib/dirname_lgpl.rs:95:52
     |
95   |             ptr::copy_nonoverlapping(src.as_ptr(), this.as_mut_ptr(), this.len());
     |             ------------------------               ^^^^^^^^^^^^^^^^^ expected `i8`, found struct `Cell`
     |             |
     |             arguments to this function are incorrect
     |
     = note: expected raw pointer `*mut i8`
                found raw pointer `*mut Cell<i8>`
note: function defined here
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/intrinsics.rs:2458:21
     |
2458 | pub const unsafe fn copy_nonoverlapping<T>(src: *const T, dst: *mut T, count: usize) {
     |                     ^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
  --> src/lib/pipe_safer.rs:10:13
   |
10 |     if pipe(fd) == 0 as libc::c_int {
   |        ---- ^^ expected `i32`, found slice `[i32]`
   |        |
   |        arguments to this function are incorrect
   |
   = note:    expected raw pointer `*mut i32`
           found mutable reference `&'h0 mut [i32]`
note: function defined here
  --> src/lib/pipe_safer.rs:5:8
   |
5  |     fn pipe(__pipedes: *mut libc::c_int) -> libc::c_int;
   |        ^^^^

error[E0599]: no method named `get` found for raw pointer `*mut i32` in the current scope
  --> src/lib/pipe_safer.rs:16:63
   |
16 |                 let mut e: libc::c_int = (__errno_location()).get();
   |                                                               ^^^ method not found in `*mut i32`
   |
   = note: try using `<*const T>::as_ref()` to get a reference to the type behind the pointer: https://doc.rust-lang.org/std/primitive.pointer.html#method.as_ref
   = note: using `<*const T>::as_ref()` on a pointer which is unaligned or points to invalid or uninitialized memory is undefined behavior

error[E0599]: no method named `set` found for raw pointer `*mut i32` in the current scope
   --> src/lib/pipe_safer.rs:18:38
    |
18  |                 (__errno_location()).set(e);
    |                                      ^^^
    |
   ::: /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/pin.rs:659:12
    |
659 |     pub fn set(&mut self, value: P::Target)
    |            --- the method is available for `Pin<&mut *mut i32>` here
    |
    = note: try using `<*const T>::as_ref()` to get a reference to the type behind the pointer: https://doc.rust-lang.org/std/primitive.pointer.html#method.as_ref
    = note: using `<*const T>::as_ref()` on a pointer which is unaligned or points to invalid or uninitialized memory is undefined behavior
help: consider wrapping the receiver expression with the appropriate type
    |
18  |                 Pin::new(&mut (__errno_location())).set(e);
    |                 +++++++++++++                     +
help: there is an associated function with a similar name
    |
18  |                 (__errno_location()).offset(e);
    |                                      ~~~~~~

error[E0599]: no method named `offset` found for reference `&printf_args::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
  --> src/lib/printf_args.rs:85:27
   |
85 |     ap = &mut *((*a).arg).offset(0 as libc::c_int as isize) as *mut argument;
   |                           ^^^^^^ method not found in `&printf_args::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:139:36
    |
139 |                 (*ap).a.a_string = args.arg::<*const libc::c_char>();
    |                 ----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `is_null` found for reference `&i8` in the current scope
   --> src/lib/printf_args.rs:140:39
    |
140 |                 if ((*ap).a.a_string).is_null() {
    |                                       ^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:141:40
    |
141 |                     (*ap).a.a_string = b"(NULL)\0" as *const u8 as *const libc::c_char;
    |                     ----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:145:41
    |
145 |                 (*ap).a.a_wide_string = args.arg::<*const wchar_t>();
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*const i32`

error[E0599]: no method named `is_null` found for reference `&i32` in the current scope
   --> src/lib/printf_args.rs:146:44
    |
146 |                 if ((*ap).a.a_wide_string).is_null() {
    |                                            ^^^^^^^ method not found in `&i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:156:45
    |
156 |                     (*ap).a.a_wide_string = wide_null_string.as_ptr();
    |                     ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*const i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:160:37
    |
160 |                 (*ap).a.a_pointer = args.arg::<*mut libc::c_void>();
    |                 -----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:163:49
    |
163 |                 (*ap).a.a_count_schar_pointer = args.arg::<*mut libc::c_schar>();
    |                 -----------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*mut i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:166:49
    |
166 |                 (*ap).a.a_count_short_pointer = args.arg::<*mut libc::c_short>();
    |                 -----------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i16`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i16`
             found raw pointer `*mut i16`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:169:47
    |
169 |                 (*ap).a.a_count_int_pointer = args.arg::<*mut libc::c_int>();
    |                 ---------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*mut i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:172:51
    |
172 |                 (*ap).a.a_count_longint_pointer = args.arg::<*mut libc::c_long>();
    |                 -------------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i64`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i64`
             found raw pointer `*mut i64`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:177:52
    |
175 | /                 (*ap)
176 | |                     .a
177 | |                     .a_count_longlongint_pointer = args.arg::<*mut libc::c_longlong>();
    | |                                                -   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i64`, found *-ptr
    | |________________________________________________|
    |                                                  expected due to the type of this binding
    |
    = note: expected reference `&i64`
             found raw pointer `*mut i64`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:130:16
    |
130 |     (*a).arg = ((*a).direct_alloc_arg).as_mut_ptr();
    |     --------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |     |
    |     expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:143:60
    |
143 |         let mut dp: *mut char_directive = &mut *((*d).dir).offset((*d).count as isize)
    |                                                            ^^^^^^ method not found in `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:145:27
    |
145 |         (*dp).dir_start = cp.offset(-(1 as libc::c_int as isize));
    |         ---------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:147:29
    |
147 |         (*dp).width_start = 0 as *const libc::c_char;
    |         -----------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:148:27
    |
148 |         (*dp).width_end = 0 as *const libc::c_char;
    |         ---------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:150:33
    |
150 |         (*dp).precision_start = 0 as *const libc::c_char;
    |         ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:151:31
    |
151 |         (*dp).precision_end = 0 as *const libc::c_char;
    |         -------------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:228:33
    |
228 |             (*dp).width_start = cp;
    |             -----------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:231:31
    |
231 |             (*dp).width_end = cp;
    |             ---------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:319:39
    |
319 |                 memory = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                              -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                              |
    |                              &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:328:29
    |
328 |                 if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                    |
    |                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:338:28
    |
338 |                 (*a).arg = memory;
    |                 --------   ^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:343:30
    |
343 |                 (*((*a).arg).offset(fresh2 as isize)).type_0 = TYPE_NONE;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:345:29
    |
345 |             if (*((*a).arg).offset(n_1 as isize)).type_0 as libc::c_uint
    |                             ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:348:30
    |
348 |                 (*((*a).arg).offset(n_1 as isize)).type_0 = TYPE_INT;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:349:36
    |
349 |             } else if (*((*a).arg).offset(n_1 as isize)).type_0 as libc::c_uint
    |                                    ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:357:33
    |
357 |             (*dp).width_start = cp;
    |             -----------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:362:31
    |
362 |             (*dp).width_end = cp;
    |             ---------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `offset_from` found for reference `&i8` in the current scope
   --> src/lib/printf_parse.rs:363:46
    |
363 |             width_length = ((*dp).width_end).offset_from((*dp).width_start)
    |                                              ^^^^^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:373:41
    |
373 |                 (*dp).precision_start = cp.offset(-(1 as libc::c_int as isize));
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:376:39
    |
376 |                 (*dp).precision_end = cp;
    |                 -------------------   ^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:464:45
    |
464 |                     memory_0 = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                                    |
    |                                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:473:33
    |
473 |                     if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                        -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                        |
    |                        &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:483:32
    |
483 |                     (*a).arg = memory_0;
    |                     --------   ^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:488:34
    |
488 |                     (*((*a).arg).offset(fresh4 as isize)).type_0 = TYPE_NONE;
    |                                  ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:490:33
    |
490 |                 if (*((*a).arg).offset(n_3 as isize)).type_0 as libc::c_uint
    |                                 ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:493:34
    |
493 |                     (*((*a).arg).offset(n_3 as isize)).type_0 = TYPE_INT;
    |                                  ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:494:40
    |
494 |                 } else if (*((*a).arg).offset(n_3 as isize)).type_0 as libc::c_uint
    |                                        ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:502:41
    |
502 |                 (*dp).precision_start = cp.offset(-(1 as libc::c_int as isize));
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:509:39
    |
509 |                 (*dp).precision_end = cp;
    |                 -------------------   ^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `offset_from` found for reference `&i8` in the current scope
   --> src/lib/printf_parse.rs:511:22
    |
511 |                     .offset_from((*dp).precision_start) as libc::c_long as size_t;
    |                      ^^^^^^^^^^^ method not found in `&i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:701:41
    |
701 |                 memory_1 = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                                |
    |                                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:710:29
    |
710 |                 if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                    |
    |                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:720:28
    |
720 |                 (*a).arg = memory_1;
    |                 --------   ^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:725:30
    |
725 |                 (*((*a).arg).offset(fresh7 as isize)).type_0 = TYPE_NONE;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:727:29
    |
727 |             if (*((*a).arg).offset(n_4 as isize)).type_0 as libc::c_uint
    |                             ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:730:30
    |
730 |                 (*((*a).arg).offset(n_4 as isize)).type_0 = type_0;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:731:36
    |
731 |             } else if (*((*a).arg).offset(n_4 as isize)).type_0 as libc::c_uint
    |                                    ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:739:25
    |
739 |         (*dp).dir_end = cp;
    |         -------------   ^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:768:37
    |
768 |             memory_2 = (if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                            -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                            |
    |                            &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:777:25
    |
777 |             if (*d).dir == ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:787:24
    |
787 |             (*d).dir = memory_2;
    |             --------   ^^^^^^^^ expected `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:792:25
    |
792 |             if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:795:25
    |
795 |             if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:802:25
    |
802 |             if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:805:25
    |
805 |             if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0599]: no method named `offset` found for reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:812:47
    |
812 |             let ref mut fresh8 = (*((*d).dir).offset((*d).count as isize)).dir_start;
    |                                               ^^^^^^ method not found in `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:320:29
    |
320 |                     realloc((*a).arg as *mut libc::c_void, memory_size)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:331:25
    |
331 |                         (*a).arg as *const libc::c_void,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:465:33
    |
465 |                         realloc((*a).arg as *mut libc::c_void, memory_size_0)
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:476:29
    |
476 | ...                   (*a).arg as *const libc::c_void,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:702:29
    |
702 |                     realloc((*a).arg as *mut libc::c_void, memory_size_1)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:713:25
    |
713 |                         (*a).arg as *const libc::c_void,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:769:25
    |
769 |                 realloc((*d).dir as *mut libc::c_void, memory_size_2)
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:780:21
    |
780 |                     (*d).dir as *const libc::c_void,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:793:22
    |
793 |                 free((*a).arg as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:796:22
    |
796 |                 free((*d).dir as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:803:22
    |
803 |                 free((*a).arg as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:806:22
    |
806 |                 free((*d).dir as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:20:19
   |
20 |     (*cwd).name = 0 as *mut libc::c_char;
   |     -----------   ^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
   |     |
   |     expected due to the type of this binding
   |
   = note: expected reference `&i8`
            found raw pointer `*mut i8`

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:30:23
   |
30 |         (*cwd).name = getcwd(0 as *mut libc::c_char, 0 as libc::c_int as size_t);
   |         -----------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
   |         |
   |         expected due to the type of this binding
   |
   = note: expected reference `&i8`
            found raw pointer `*mut i8`

error[E0599]: no method named `is_null` found for reference `&i8` in the current scope
  --> src/lib/save_cwd.rs:31:34
   |
31 |         return if !((*cwd).name).is_null() {
   |                                  ^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:44:27
   |
44 |         return chdir_long((*cwd).name)
   |                ---------- ^^^^^^^^^^^ types differ in mutability
   |                |
   |                arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut i8`
                found reference `&i8`
note: function defined here
  --> src/lib/save_cwd.rs:7:8
   |
7  |     fn chdir_long(dir: *mut libc::c_char) -> libc::c_int;
   |        ^^^^^^^^^^

error[E0606]: casting `&'h1 i8` as `*mut c_void` is invalid
  --> src/lib/save_cwd.rs:52:10
   |
52 |     free((*cwd).name as *mut libc::c_void);
   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: arguments to this function are incorrect
   --> src/lib/savedir.rs:114:12
    |
114 |     return strcmp((*dea).name, (*deb).name);
    |            ^^^^^^ -----------  ----------- expected `i8`, found slice `[i8]`
    |                   |
    |                   expected `i8`, found slice `[i8]`
    |
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
note: function defined here
   --> src/lib/savedir.rs:20:8
    |
20  |     fn strcmp(_: *const libc::c_char, _: *const libc::c_char) -> libc::c_int;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/savedir.rs:182:27
    |
182 |                 *fresh0 = xstrdup(entry);
    |                 -------   ^^^^^^^^^^^^^^ expected `&[i8]`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&[i8]`
             found raw pointer `*mut i8`

error[E0308]: mismatched types
   --> src/lib/savedir.rs:232:36
    |
232 |                     ((stpcpy(dest, (*entries.offset(i as isize)).name)).offset_from(dest)
    |                       ------       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `i8`, found slice `[i8]`
    |                       |
    |                       arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
note: function defined here
   --> src/lib/savedir.rs:22:8
    |
22  |     fn stpcpy(_: *mut libc::c_char, _: *const libc::c_char) -> *mut libc::c_char;
    |        ^^^^^^

error[E0606]: casting `&[i8]` as `*mut c_void` is invalid
   --> src/lib/savedir.rs:236:18
    |
236 |             free((*entries.offset(i as isize)).name as *mut libc::c_void);
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:34:10
   |
34 |     if p.is_null() {
   |          ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:79:52
   |
79 |     let mut p: &[core::cell::Cell<libc::c_void>] = malloc(n);
   |                ---------------------------------   ^^^^^^^^^ expected `&[Cell<c_void>]`, found *-ptr
   |                |
   |                expected due to this
   |
   = note: expected reference `&[Cell<c_void>]`
            found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
  --> src/lib/xmalloc.rs:80:16
   |
80 |     if &(p)[0].is_null() && n != 0 as libc::c_int as libc::c_ulong {
   |                ^^^^^^^ method not found in `Cell<c_void>`

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:90:21
   |
90 |     if n == 0 && !p.is_null() {
   |                     ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:91:14
   |
91 |         free(p);
   |         ---- ^ types differ in mutability
   |         |
   |         arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut c_void`
                found reference `&'h0 c_void`
note: function defined here
  --> src/lib/xmalloc.rs:7:8
   |
7  |     fn free(__ptr: *mut libc::c_void);
   |        ^^^^

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:92:16
   |
89 | ) -> &'h1 libc::c_void {
   |      ----------------- expected `&'h1 c_void` because of return type
...
92 |         return 0 as *mut libc::c_void;
   |                ^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
   |
   = note: expected reference `&'h1 c_void`
            found raw pointer `*mut c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:94:17
   |
94 |     p = realloc(p, n);
   |         ------- ^ types differ in mutability
   |         |
   |         arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut c_void`
                found reference `&'h0 c_void`
note: function defined here
  --> src/lib/xmalloc.rs:6:8
   |
6  |     fn realloc(_: *mut libc::c_void, _: libc::c_ulong) -> *mut libc::c_void;
   |        ^^^^^^^

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:94:9
   |
87 |     mut p: &'h0 libc::c_void,
   |            ----------------- expected due to this parameter type
...
94 |     p = realloc(p, n);
   |         ^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
   |
   = note: expected reference `&'h0 c_void`
            found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:95:10
   |
95 |     if p.is_null() && n != 0 {
   |          ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:109:19
    |
109 |     return memset(xmalloc(s), 0 as libc::c_int, s);
    |            ------ ^^^^^^^^^^ types differ in mutability
    |            |
    |            arguments to this function are incorrect
    |
    = note: expected raw pointer `*mut c_void`
                 found reference `&[Cell<c_void>]`
note: function defined here
   --> src/lib/xmalloc.rs:13:8
    |
13  |     fn memset(
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:109:12
    |
108 | pub unsafe extern "C" fn xzalloc<'h0>(mut s: size_t) -> &'h0 libc::c_void {
    |                                                         ----------------- expected `&'h0 c_void` because of return type
109 |     return memset(xmalloc(s), 0 as libc::c_int, s);
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |
    = note: expected reference `&'h0 c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:113:32
    |
113 |     let mut p: &libc::c_void = 0 as *mut libc::c_void;
    |                -------------   ^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |                |
    |                expected due to this
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:124:17
    |
113 |     let mut p: &libc::c_void = 0 as *mut libc::c_void;
    |                ------------- expected due to this type
...
124 |             p = calloc(n, s);
    |                 ^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for reference `&c_void` in the current scope
   --> src/lib/xmalloc.rs:125:15
    |
125 |             p.is_null()
    |               ^^^^^^^ method not found in `&c_void`

error[E0277]: the trait bound `Cell<c_void>: std::marker::Copy` is not satisfied
    --> src/lib/xmalloc.rs:142:15
     |
142  |     dest[..n].copy_from_slice(&src[..n]);
     |               ^^^^^^^^^^^^^^^ the trait `std::marker::Copy` is not implemented for `Cell<c_void>`
     |
note: required by a bound in `core::slice::<impl [T]>::copy_from_slice`
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/slice/mod.rs:3216:12
     |
3216 |         T: Copy,
     |            ^^^^ required by this bound in `core::slice::<impl [T]>::copy_from_slice`

error[E0308]: mismatched types
    --> src/lib/xmalloc.rs:142:31
     |
142  |     dest[..n].copy_from_slice(&src[..n]);
     |               --------------- ^^^^^^^^^ expected struct `Cell`, found enum `c_void`
     |               |
     |               arguments to this function are incorrect
     |
     = note: expected reference `&[Cell<c_void>]`
                found reference `&[c_void]`
note: associated function defined here
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/slice/mod.rs:3214:12
     |
3214 |     pub fn copy_from_slice(&mut self, src: &[T])
     |            ^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:143:5
    |
143 |     dest
    |     ^^^^ expected enum `c_void`, found slice
    |
    = note: expected reference `&'h1 c_void`
               found reference `&[Cell<c_void>]`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:150:17
    |
150 |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
    |          ------ ^^^^^^ expected `i8`, found slice `[i8]`
    |          |
    |          arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&'h0 [i8]`
note: function defined here
   --> src/lib/xmalloc.rs:18:8
    |
18  |     fn strlen(_: *const libc::c_char) -> libc::c_ulong;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:149:9
    |
148 |     return xmemdup(
    |            ------- arguments to this function are incorrect
149 |         string as *const libc::c_void,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[c_void]`, found *-ptr
    |
    = note: expected reference `&[c_void]`
             found raw pointer `*const c_void`
note: function defined here
   --> src/lib/xmalloc.rs:135:26
    |
135 | pub unsafe extern "C" fn xmemdup<'h0,'h1>(
    |                          ^^^^^^^
136 |     mut p: &'h0 [libc::c_void],
    |     --------------------------
137 |     mut s: size_t,
    |     -------------

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:148:12
    |
147 |   pub unsafe extern "C" fn xstrdup<'h0,'h1>(mut string: &'h0 [libc::c_char]) -> &'h1 libc::c_char {
    |                                                                                 ----------------- expected `&'h1 i8` because of return type
148 |       return xmemdup(
    |  ____________^
149 | |         string as *const libc::c_void,
150 | |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
151 | |     ) as *mut libc::c_char;
    | |__________________________^ expected `&i8`, found *-ptr
    |
    = note: expected reference `&'h1 i8`
             found raw pointer `*mut i8`

error[E0606]: casting `&'h0 [i8]` as `*const c_void` is invalid
   --> src/lib/xmalloc.rs:149:9
    |
149 |         string as *const libc::c_void,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&c_void` as `*mut i8` is invalid
   --> src/lib/xmalloc.rs:148:12
    |
148 |       return xmemdup(
    |  ____________^
149 | |         string as *const libc::c_void,
150 | |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
151 | |     ) as *mut libc::c_char;
    | |__________________________^

error[E0308]: mismatched types
   --> src/trees.rs:414:34
    |
414 |     let mut tree: *mut ct_data = (*desc).dyn_tree;
    |                   ------------   ^^^^^^^^^^^^^^^^ types differ in mutability
    |                   |
    |                   expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[Cell<ct_data>]`

error[E0308]: mismatched types
   --> src/trees.rs:415:39
    |
415 |     let mut extra: *mut libc::c_int = (*desc).extra_bits;
    |                    ----------------   ^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut i32`
                 found reference `&[i32]`

error[E0308]: mismatched types
   --> src/trees.rs:419:35
    |
419 |     let mut stree: *mut ct_data = (*desc).static_tree;
    |                    ------------   ^^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[ct_data]`

error[E0308]: mismatched types
   --> src/trees.rs:550:34
    |
550 |     let mut tree: *mut ct_data = (*desc).dyn_tree;
    |                   ------------   ^^^^^^^^^^^^^^^^ types differ in mutability
    |                   |
    |                   expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[Cell<ct_data>]`

error[E0308]: mismatched types
   --> src/trees.rs:551:35
    |
551 |     let mut stree: *mut ct_data = (*desc).static_tree;
    |                    ------------   ^^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[ct_data]`

error[E0308]: mismatched types
   --> src/util.rs:558:37
    |
558 |     let mut r: libc::c_int = unlink(filename);
    |                              ------ ^^^^^^^^ expected `i8`, found slice `[i8]`
    |                              |
    |                              arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&'h0 [i8]`
note: function defined here
   --> src/util.rs:11:8
    |
11  |     fn unlink(__name: *const libc::c_char) -> libc::c_int;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/util.rs:563:60
    |
563 |     let mut p: &[core::cell::Cell<libc::c_char>] = strrchr(name, '.' as i32);
    |                                                    ------- ^^^^ expected `i8`, found slice `[i8]`
    |                                                    |
    |                                                    arguments to this function are incorrect
    |
    = note:    expected raw pointer `*const i8`
            found mutable reference `&'h0 mut [i8]`
note: function defined here
   --> src/util.rs:19:8
    |
19  |     fn strrchr(_: *const libc::c_char, _: libc::c_int) -> *mut libc::c_char;
    |        ^^^^^^^

error[E0308]: mismatched types
   --> src/util.rs:563:52
    |
563 |     let mut p: &[core::cell::Cell<libc::c_char>] = strrchr(name, '.' as i32);
    |                ---------------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<i8>]`, found *-ptr
    |                |
    |                expected due to this
    |
    = note: expected reference `&[Cell<i8>]`
             found raw pointer `*mut i8`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
   --> src/util.rs:564:16
    |
564 |     if &(p)[0].is_null() {
    |                ^^^^^^^ method not found in `Cell<i8>`

error[E0277]: can't compare `Cell<i8>` with `i8`
   --> src/util.rs:567:16
    |
567 |     if &(p)[0] == &(&*(name))[0] {
    |                ^^ no implementation for `Cell<i8> == i8`
    |
    = help: the trait `PartialEq<i8>` is not implemented for `Cell<i8>`
    = help: the trait `PartialEq` is implemented for `Cell<T>`
    = note: required because of the requirements on the impl of `PartialEq<&i8>` for `&Cell<i8>`

error[E0600]: cannot apply unary operator `-` to type `usize`
   --> src/util.rs:572:19
    |
572 |         p = &(p)[((-1) as usize) ..];
    |                   ^^^^
    |                   |
    |                   cannot apply unary operator `-`
    |                   help: you may have meant the maximum value of `usize`: `usize::MAX`
    |
    = note: unsigned values cannot be negated

error[E0599]: no method named `set` found for reference `&[Cell<i8>]` in the current scope
   --> src/util.rs:574:17
    |
574 |             (p).set('_' as i32 as libc::c_char);
    |                 ^^^
    |
   ::: /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/pin.rs:659:12
    |
659 |     pub fn set(&mut self, value: P::Target)
    |            --- the method is available for `Pin<&mut &[Cell<i8>]>` here
    |
help: consider wrapping the receiver expression with the appropriate type
    |
574 |             Pin::new(&mut (p)).set('_' as i32 as libc::c_char);
    |             +++++++++++++    +
help: there is an associated function with a similar name
    |
574 |             (p).get('_' as i32 as libc::c_char);
    |                 ~~~

error[E0277]: can't compare `Cell<i8>` with `i8`
   --> src/util.rs:576:22
    |
576 |         if !(&(p)[0] != &(&*(name))[0]) {
    |                      ^^ no implementation for `Cell<i8> == i8`
    |
    = help: the trait `PartialEq<i8>` is not implemented for `Cell<i8>`
    = help: the trait `PartialEq` is implemented for `Cell<T>`
    = note: required because of the requirements on the impl of `PartialEq<&i8>` for `&Cell<i8>`

error[E0605]: non-primitive cast: `Option<&Cell<i8>>` as `i32`
   --> src/util.rs:573:12
    |
573 |         if (p).get(0) as libc::c_int == '.' as i32 {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^ an `as` expression can only be used to convert between primitive types or to coerce to a specific trait object

error: aborting due to 139 previous errors; 7 warnings emitted

Some errors have detailed explanations: E0106, E0277, E0308, E0369, E0599, E0600, E0605, E0606.
For more information about an error, try `rustc --explain E0106`.
Original diagnostics will follow.

error[E0106]: missing lifetime specifiers
 --> src/lib/open_safer.rs:6:31
  |
6 | pub type __builtin_va_list = [__va_list_tag; 1];
  |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
  |
help: consider introducing a named lifetime parameter
  |
6 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
  |                           ++++                 ++++++++

error[E0106]: missing lifetime specifiers
  --> src/lib/openat_safer.rs:11:31
   |
11 | pub type __builtin_va_list = [__va_list_tag; 1];
   |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
   |
help: consider introducing a named lifetime parameter
   |
11 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
   |                           ++++                 ++++++++

error[E0106]: missing lifetime specifiers
  --> src/lib/printf.rs:13:31
   |
13 | pub type __builtin_va_list = [__va_list_tag; 1];
   |                               ^^^^^^^^^^^^^ expected 2 lifetime parameters
   |
help: consider introducing a named lifetime parameter
   |
13 | pub type __builtin_va_list<'a> = [__va_list_tag<'a, 'a>; 1];
   |                           ++++                 ++++++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:17:23
   |
17 | pub type __sigval_t = sigval;
   |                       ^^^^^^ expected named lifetime parameter
   |
help: consider introducing a named lifetime parameter
   |
17 | pub type __sigval_t<'a> = sigval<'a>;
   |                    ++++         ++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:85:20
   |
85 |     pub si_sigval: sigval,
   |                    ^^^^^^ expected named lifetime parameter
   |
help: consider using the `'h60` lifetime
   |
85 |     pub si_sigval: sigval<'h60>,
   |                          ++++++

error[E0106]: missing lifetime specifier
  --> src/lib/sig_handler.rs:92:20
   |
92 |     pub si_sigval: sigval,
   |                    ^^^^^^ expected named lifetime parameter
   |
help: consider using the `'h60` lifetime
   |
92 |     pub si_sigval: sigval<'h60>,
   |                          ++++++

warning: unused label
  --> src/lib/chdir_long.rs:77:9
   |
77 |         'c_970: {
   |         ^^^^^^
   |
   = note: `#[warn(unused_labels)]` on by default

warning: unused label
   --> src/lib/chdir_long.rs:138:5
    |
138 |     'c_1569: {
    |     ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:164:5
    |
164 |     'c_1531: {
    |     ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:226:13
    |
226 |             'c_1360: {
    |             ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:252:13
    |
252 |             'c_1321: {
    |             ^^^^^^^

warning: unused label
   --> src/lib/chdir_long.rs:298:17
    |
298 |                 'c_1241: {
    |                 ^^^^^^^

warning: the feature `asm` has been stable since 1.59.0 and no longer requires an attribute to enable
 --> lib.rs:8:12
  |
8 | #![feature(asm)]
  |            ^^^
  |
  = note: `#[warn(stable_features)]` on by default

error[E0308]: mismatched types
   --> src/trees.rs:156:23
    |
156 |             dyn_tree: dyn_ltree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:157:26
    |
157 |             static_tree: static_ltree.as_ptr() as *mut _,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:158:25
    |
158 |             extra_bits: extra_lbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:170:23
    |
170 |             dyn_tree: dyn_dtree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:171:26
    |
171 |             static_tree: static_dtree.as_ptr() as *mut _,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:172:25
    |
172 |             extra_bits: extra_dbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:184:23
    |
184 |             dyn_tree: bl_tree.as_ptr() as *mut _,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<ct_data>]`, found *-ptr
    |
    = note: expected reference `&[Cell<ct_data>]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
   --> src/trees.rs:185:26
    |
185 |             static_tree: 0 as *const ct_data as *mut ct_data,
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[ct_data]`, found *-ptr
    |
    = note: expected reference `&[ct_data]`
             found raw pointer `*mut ct_data`

error[E0308]: mismatched types
   --> src/trees.rs:186:25
    |
186 |             extra_bits: extra_blbits.as_ptr() as *mut _,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[i32]`, found *-ptr
    |
    = note: expected reference `&[i32]`
             found raw pointer `*mut _`

error[E0308]: mismatched types
  --> src/lib/dirname_lgpl.rs:61:54
   |
61 |       let mut dir: &[core::cell::Cell<libc::c_char>] = std::cell::Cell::from_mut(&mut (malloc(
   |  __________________---------------------------------___^
   | |                  |
   | |                  expected due to this
62 | |         length
63 | |             .wrapping_add(append_dot as libc::c_ulong)
64 | |             .wrapping_add(1 as libc::c_int as libc::c_ulong),
65 | |     )));
   | |_______^ expected slice, found struct `Cell`
   |
   = note: expected reference `&[Cell<i8>]`
              found reference `&Cell<*mut c_void>`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
  --> src/lib/dirname_lgpl.rs:66:18
   |
66 |     if &(dir)[0].is_null() {
   |                  ^^^^^^^ method not found in `Cell<i8>`

error[E0308]: mismatched types
  --> src/lib/dirname_lgpl.rs:67:16
   |
55 | pub unsafe extern "C" fn mdir_name<'h0,'h1>(mut file: &'h0 [libc::c_char]) -> &'h1 core::cell::Cell<libc::c_char> {
   |                                                                               ----------------------------------- expected `&'h1 Cell<i8>` because of return type
...
67 |         return 0 as *mut libc::c_char;
   |                ^^^^^^^^^^^^^^^^^^^^^^ expected `&Cell<i8>`, found *-ptr
   |
   = note: expected reference `&'h1 Cell<i8>`
            found raw pointer `*mut i8`

error[E0308]: mismatched types
    --> src/lib/dirname_lgpl.rs:95:52
     |
95   |             ptr::copy_nonoverlapping(src.as_ptr(), this.as_mut_ptr(), this.len());
     |             ------------------------               ^^^^^^^^^^^^^^^^^ expected `i8`, found struct `Cell`
     |             |
     |             arguments to this function are incorrect
     |
     = note: expected raw pointer `*mut i8`
                found raw pointer `*mut Cell<i8>`
note: function defined here
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/intrinsics.rs:2458:21
     |
2458 | pub const unsafe fn copy_nonoverlapping<T>(src: *const T, dst: *mut T, count: usize) {
     |                     ^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
  --> src/lib/pipe_safer.rs:10:13
   |
10 |     if pipe(fd) == 0 as libc::c_int {
   |        ---- ^^ expected `i32`, found slice `[i32]`
   |        |
   |        arguments to this function are incorrect
   |
   = note:    expected raw pointer `*mut i32`
           found mutable reference `&'h0 mut [i32]`
note: function defined here
  --> src/lib/pipe_safer.rs:5:8
   |
5  |     fn pipe(__pipedes: *mut libc::c_int) -> libc::c_int;
   |        ^^^^

error[E0599]: no method named `get` found for raw pointer `*mut i32` in the current scope
  --> src/lib/pipe_safer.rs:16:63
   |
16 |                 let mut e: libc::c_int = (__errno_location()).get();
   |                                                               ^^^ method not found in `*mut i32`
   |
   = note: try using `<*const T>::as_ref()` to get a reference to the type behind the pointer: https://doc.rust-lang.org/std/primitive.pointer.html#method.as_ref
   = note: using `<*const T>::as_ref()` on a pointer which is unaligned or points to invalid or uninitialized memory is undefined behavior

error[E0599]: no method named `set` found for raw pointer `*mut i32` in the current scope
   --> src/lib/pipe_safer.rs:18:38
    |
18  |                 (__errno_location()).set(e);
    |                                      ^^^
    |
   ::: /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/pin.rs:659:12
    |
659 |     pub fn set(&mut self, value: P::Target)
    |            --- the method is available for `Pin<&mut *mut i32>` here
    |
    = note: try using `<*const T>::as_ref()` to get a reference to the type behind the pointer: https://doc.rust-lang.org/std/primitive.pointer.html#method.as_ref
    = note: using `<*const T>::as_ref()` on a pointer which is unaligned or points to invalid or uninitialized memory is undefined behavior
help: consider wrapping the receiver expression with the appropriate type
    |
18  |                 Pin::new(&mut (__errno_location())).set(e);
    |                 +++++++++++++                     +
help: there is an associated function with a similar name
    |
18  |                 (__errno_location()).offset(e);
    |                                      ~~~~~~

error[E0599]: no method named `offset` found for reference `&printf_args::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
  --> src/lib/printf_args.rs:85:27
   |
85 |     ap = &mut *((*a).arg).offset(0 as libc::c_int as isize) as *mut argument;
   |                           ^^^^^^ method not found in `&printf_args::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:139:36
    |
139 |                 (*ap).a.a_string = args.arg::<*const libc::c_char>();
    |                 ----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `is_null` found for reference `&i8` in the current scope
   --> src/lib/printf_args.rs:140:39
    |
140 |                 if ((*ap).a.a_string).is_null() {
    |                                       ^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:141:40
    |
141 |                     (*ap).a.a_string = b"(NULL)\0" as *const u8 as *const libc::c_char;
    |                     ----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:145:41
    |
145 |                 (*ap).a.a_wide_string = args.arg::<*const wchar_t>();
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*const i32`

error[E0599]: no method named `is_null` found for reference `&i32` in the current scope
   --> src/lib/printf_args.rs:146:44
    |
146 |                 if ((*ap).a.a_wide_string).is_null() {
    |                                            ^^^^^^^ method not found in `&i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:156:45
    |
156 |                     (*ap).a.a_wide_string = wide_null_string.as_ptr();
    |                     ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*const i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:160:37
    |
160 |                 (*ap).a.a_pointer = args.arg::<*mut libc::c_void>();
    |                 -----------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:163:49
    |
163 |                 (*ap).a.a_count_schar_pointer = args.arg::<*mut libc::c_schar>();
    |                 -----------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*mut i8`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:166:49
    |
166 |                 (*ap).a.a_count_short_pointer = args.arg::<*mut libc::c_short>();
    |                 -----------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i16`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i16`
             found raw pointer `*mut i16`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:169:47
    |
169 |                 (*ap).a.a_count_int_pointer = args.arg::<*mut libc::c_int>();
    |                 ---------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i32`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i32`
             found raw pointer `*mut i32`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:172:51
    |
172 |                 (*ap).a.a_count_longint_pointer = args.arg::<*mut libc::c_long>();
    |                 -------------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i64`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i64`
             found raw pointer `*mut i64`

error[E0308]: mismatched types
   --> src/lib/printf_args.rs:177:52
    |
175 | /                 (*ap)
176 | |                     .a
177 | |                     .a_count_longlongint_pointer = args.arg::<*mut libc::c_longlong>();
    | |                                                -   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i64`, found *-ptr
    | |________________________________________________|
    |                                                  expected due to the type of this binding
    |
    = note: expected reference `&i64`
             found raw pointer `*mut i64`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:130:16
    |
130 |     (*a).arg = ((*a).direct_alloc_arg).as_mut_ptr();
    |     --------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |     |
    |     expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:143:60
    |
143 |         let mut dp: *mut char_directive = &mut *((*d).dir).offset((*d).count as isize)
    |                                                            ^^^^^^ method not found in `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:145:27
    |
145 |         (*dp).dir_start = cp.offset(-(1 as libc::c_int as isize));
    |         ---------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:147:29
    |
147 |         (*dp).width_start = 0 as *const libc::c_char;
    |         -----------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:148:27
    |
148 |         (*dp).width_end = 0 as *const libc::c_char;
    |         ---------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:150:33
    |
150 |         (*dp).precision_start = 0 as *const libc::c_char;
    |         ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:151:31
    |
151 |         (*dp).precision_end = 0 as *const libc::c_char;
    |         -------------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:228:33
    |
228 |             (*dp).width_start = cp;
    |             -----------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:231:31
    |
231 |             (*dp).width_end = cp;
    |             ---------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:319:39
    |
319 |                 memory = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                              -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                              |
    |                              &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:328:29
    |
328 |                 if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                    |
    |                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:338:28
    |
338 |                 (*a).arg = memory;
    |                 --------   ^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:343:30
    |
343 |                 (*((*a).arg).offset(fresh2 as isize)).type_0 = TYPE_NONE;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:345:29
    |
345 |             if (*((*a).arg).offset(n_1 as isize)).type_0 as libc::c_uint
    |                             ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:348:30
    |
348 |                 (*((*a).arg).offset(n_1 as isize)).type_0 = TYPE_INT;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:349:36
    |
349 |             } else if (*((*a).arg).offset(n_1 as isize)).type_0 as libc::c_uint
    |                                    ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:357:33
    |
357 |             (*dp).width_start = cp;
    |             -----------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:362:31
    |
362 |             (*dp).width_end = cp;
    |             ---------------   ^^ expected `&i8`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `offset_from` found for reference `&i8` in the current scope
   --> src/lib/printf_parse.rs:363:46
    |
363 |             width_length = ((*dp).width_end).offset_from((*dp).width_start)
    |                                              ^^^^^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:373:41
    |
373 |                 (*dp).precision_start = cp.offset(-(1 as libc::c_int as isize));
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:376:39
    |
376 |                 (*dp).precision_end = cp;
    |                 -------------------   ^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:464:45
    |
464 |                     memory_0 = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                                    |
    |                                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:473:33
    |
473 |                     if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                        -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                        |
    |                        &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:483:32
    |
483 |                     (*a).arg = memory_0;
    |                     --------   ^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                     |
    |                     expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:488:34
    |
488 |                     (*((*a).arg).offset(fresh4 as isize)).type_0 = TYPE_NONE;
    |                                  ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:490:33
    |
490 |                 if (*((*a).arg).offset(n_3 as isize)).type_0 as libc::c_uint
    |                                 ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:493:34
    |
493 |                     (*((*a).arg).offset(n_3 as isize)).type_0 = TYPE_INT;
    |                                  ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:494:40
    |
494 |                 } else if (*((*a).arg).offset(n_3 as isize)).type_0 as libc::c_uint
    |                                        ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:502:41
    |
502 |                 (*dp).precision_start = cp.offset(-(1 as libc::c_int as isize));
    |                 ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:509:39
    |
509 |                 (*dp).precision_end = cp;
    |                 -------------------   ^^ expected `&i8`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0599]: no method named `offset_from` found for reference `&i8` in the current scope
   --> src/lib/printf_parse.rs:511:22
    |
511 |                     .offset_from((*dp).precision_start) as libc::c_long as size_t;
    |                      ^^^^^^^^^^^ method not found in `&i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:701:41
    |
701 |                 memory_1 = (if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                                |
    |                                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:710:29
    |
710 |                 if (*a).arg == ((*a).direct_alloc_arg).as_mut_ptr() {
    |                    -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                    |
    |                    &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:720:28
    |
720 |                 (*a).arg = memory_1;
    |                 --------   ^^^^^^^^ expected `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:725:30
    |
725 |                 (*((*a).arg).offset(fresh7 as isize)).type_0 = TYPE_NONE;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:727:29
    |
727 |             if (*((*a).arg).offset(n_4 as isize)).type_0 as libc::c_uint
    |                             ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:730:30
    |
730 |                 (*((*a).arg).offset(n_4 as isize)).type_0 = type_0;
    |                              ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0599]: no method named `offset` found for reference `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:731:36
    |
731 |             } else if (*((*a).arg).offset(n_4 as isize)).type_0 as libc::c_uint
    |                                    ^^^^^^ method not found in `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:739:25
    |
739 |         (*dp).dir_end = cp;
    |         -------------   ^^ expected `&i8`, found *-ptr
    |         |
    |         expected due to the type of this binding
    |
    = note: expected reference `&i8`
             found raw pointer `*const i8`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:768:37
    |
768 |             memory_2 = (if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                            -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                            |
    |                            &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `==` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:777:25
    |
777 |             if (*d).dir == ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0308]: mismatched types
   --> src/lib/printf_parse.rs:787:24
    |
787 |             (*d).dir = memory_2;
    |             --------   ^^^^^^^^ expected `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`, found *-ptr
    |             |
    |             expected due to the type of this binding
    |
    = note: expected reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
             found raw pointer `*mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:792:25
    |
792 |             if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:795:25
    |
795 |             if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:802:25
    |
802 |             if (*a).arg != ((*a).direct_alloc_arg).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>

error[E0369]: binary operation `!=` cannot be applied to type `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`
   --> src/lib/printf_parse.rs:805:25
    |
805 |             if (*d).dir != ((*d).direct_alloc_dir).as_mut_ptr() {
    |                -------- ^^ ------------------------------------ *mut printf_parse::char_directive<'_, '_, '_, '_, '_, '_>
    |                |
    |                &printf_parse::char_directive<'_, '_, '_, '_, '_, '_>

error[E0599]: no method named `offset` found for reference `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` in the current scope
   --> src/lib/printf_parse.rs:812:47
    |
812 |             let ref mut fresh8 = (*((*d).dir).offset((*d).count as isize)).dir_start;
    |                                               ^^^^^^ method not found in `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>`

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:320:29
    |
320 |                     realloc((*a).arg as *mut libc::c_void, memory_size)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:331:25
    |
331 |                         (*a).arg as *const libc::c_void,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:465:33
    |
465 |                         realloc((*a).arg as *mut libc::c_void, memory_size_0)
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:476:29
    |
476 | ...                   (*a).arg as *const libc::c_void,
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:702:29
    |
702 |                     realloc((*a).arg as *mut libc::c_void, memory_size_1)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:713:25
    |
713 |                         (*a).arg as *const libc::c_void,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:769:25
    |
769 |                 realloc((*d).dir as *mut libc::c_void, memory_size_2)
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*const c_void` is invalid
   --> src/lib/printf_parse.rs:780:21
    |
780 |                     (*d).dir as *const libc::c_void,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:793:22
    |
793 |                 free((*a).arg as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:796:22
    |
796 |                 free((*d).dir as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::argument<'_, '_, '_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:803:22
    |
803 |                 free((*a).arg as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&printf_parse::char_directive<'_, '_, '_, '_, '_, '_>` as `*mut c_void` is invalid
   --> src/lib/printf_parse.rs:806:22
    |
806 |                 free((*d).dir as *mut libc::c_void);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:20:19
   |
20 |     (*cwd).name = 0 as *mut libc::c_char;
   |     -----------   ^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
   |     |
   |     expected due to the type of this binding
   |
   = note: expected reference `&i8`
            found raw pointer `*mut i8`

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:30:23
   |
30 |         (*cwd).name = getcwd(0 as *mut libc::c_char, 0 as libc::c_int as size_t);
   |         -----------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&i8`, found *-ptr
   |         |
   |         expected due to the type of this binding
   |
   = note: expected reference `&i8`
            found raw pointer `*mut i8`

error[E0599]: no method named `is_null` found for reference `&i8` in the current scope
  --> src/lib/save_cwd.rs:31:34
   |
31 |         return if !((*cwd).name).is_null() {
   |                                  ^^^^^^^ method not found in `&i8`

error[E0308]: mismatched types
  --> src/lib/save_cwd.rs:44:27
   |
44 |         return chdir_long((*cwd).name)
   |                ---------- ^^^^^^^^^^^ types differ in mutability
   |                |
   |                arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut i8`
                found reference `&i8`
note: function defined here
  --> src/lib/save_cwd.rs:7:8
   |
7  |     fn chdir_long(dir: *mut libc::c_char) -> libc::c_int;
   |        ^^^^^^^^^^

error[E0606]: casting `&'h1 i8` as `*mut c_void` is invalid
  --> src/lib/save_cwd.rs:52:10
   |
52 |     free((*cwd).name as *mut libc::c_void);
   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: arguments to this function are incorrect
   --> src/lib/savedir.rs:114:12
    |
114 |     return strcmp((*dea).name, (*deb).name);
    |            ^^^^^^ -----------  ----------- expected `i8`, found slice `[i8]`
    |                   |
    |                   expected `i8`, found slice `[i8]`
    |
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
note: function defined here
   --> src/lib/savedir.rs:20:8
    |
20  |     fn strcmp(_: *const libc::c_char, _: *const libc::c_char) -> libc::c_int;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/savedir.rs:182:27
    |
182 |                 *fresh0 = xstrdup(entry);
    |                 -------   ^^^^^^^^^^^^^^ expected `&[i8]`, found *-ptr
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected reference `&[i8]`
             found raw pointer `*mut i8`

error[E0308]: mismatched types
   --> src/lib/savedir.rs:232:36
    |
232 |                     ((stpcpy(dest, (*entries.offset(i as isize)).name)).offset_from(dest)
    |                       ------       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `i8`, found slice `[i8]`
    |                       |
    |                       arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&[i8]`
note: function defined here
   --> src/lib/savedir.rs:22:8
    |
22  |     fn stpcpy(_: *mut libc::c_char, _: *const libc::c_char) -> *mut libc::c_char;
    |        ^^^^^^

error[E0606]: casting `&[i8]` as `*mut c_void` is invalid
   --> src/lib/savedir.rs:236:18
    |
236 |             free((*entries.offset(i as isize)).name as *mut libc::c_void);
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:34:10
   |
34 |     if p.is_null() {
   |          ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:79:52
   |
79 |     let mut p: &[core::cell::Cell<libc::c_void>] = malloc(n);
   |                ---------------------------------   ^^^^^^^^^ expected `&[Cell<c_void>]`, found *-ptr
   |                |
   |                expected due to this
   |
   = note: expected reference `&[Cell<c_void>]`
            found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
  --> src/lib/xmalloc.rs:80:16
   |
80 |     if &(p)[0].is_null() && n != 0 as libc::c_int as libc::c_ulong {
   |                ^^^^^^^ method not found in `Cell<c_void>`

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:90:21
   |
90 |     if n == 0 && !p.is_null() {
   |                     ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:91:14
   |
91 |         free(p);
   |         ---- ^ types differ in mutability
   |         |
   |         arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut c_void`
                found reference `&'h0 c_void`
note: function defined here
  --> src/lib/xmalloc.rs:7:8
   |
7  |     fn free(__ptr: *mut libc::c_void);
   |        ^^^^

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:92:16
   |
89 | ) -> &'h1 libc::c_void {
   |      ----------------- expected `&'h1 c_void` because of return type
...
92 |         return 0 as *mut libc::c_void;
   |                ^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
   |
   = note: expected reference `&'h1 c_void`
            found raw pointer `*mut c_void`

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:94:17
   |
94 |     p = realloc(p, n);
   |         ------- ^ types differ in mutability
   |         |
   |         arguments to this function are incorrect
   |
   = note: expected raw pointer `*mut c_void`
                found reference `&'h0 c_void`
note: function defined here
  --> src/lib/xmalloc.rs:6:8
   |
6  |     fn realloc(_: *mut libc::c_void, _: libc::c_ulong) -> *mut libc::c_void;
   |        ^^^^^^^

error[E0308]: mismatched types
  --> src/lib/xmalloc.rs:94:9
   |
87 |     mut p: &'h0 libc::c_void,
   |            ----------------- expected due to this parameter type
...
94 |     p = realloc(p, n);
   |         ^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
   |
   = note: expected reference `&'h0 c_void`
            found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for reference `&'h0 c_void` in the current scope
  --> src/lib/xmalloc.rs:95:10
   |
95 |     if p.is_null() && n != 0 {
   |          ^^^^^^^ method not found in `&'h0 c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:109:19
    |
109 |     return memset(xmalloc(s), 0 as libc::c_int, s);
    |            ------ ^^^^^^^^^^ types differ in mutability
    |            |
    |            arguments to this function are incorrect
    |
    = note: expected raw pointer `*mut c_void`
                 found reference `&[Cell<c_void>]`
note: function defined here
   --> src/lib/xmalloc.rs:13:8
    |
13  |     fn memset(
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:109:12
    |
108 | pub unsafe extern "C" fn xzalloc<'h0>(mut s: size_t) -> &'h0 libc::c_void {
    |                                                         ----------------- expected `&'h0 c_void` because of return type
109 |     return memset(xmalloc(s), 0 as libc::c_int, s);
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |
    = note: expected reference `&'h0 c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:113:32
    |
113 |     let mut p: &libc::c_void = 0 as *mut libc::c_void;
    |                -------------   ^^^^^^^^^^^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |                |
    |                expected due to this
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:124:17
    |
113 |     let mut p: &libc::c_void = 0 as *mut libc::c_void;
    |                ------------- expected due to this type
...
124 |             p = calloc(n, s);
    |                 ^^^^^^^^^^^^ expected `&c_void`, found *-ptr
    |
    = note: expected reference `&c_void`
             found raw pointer `*mut c_void`

error[E0599]: no method named `is_null` found for reference `&c_void` in the current scope
   --> src/lib/xmalloc.rs:125:15
    |
125 |             p.is_null()
    |               ^^^^^^^ method not found in `&c_void`

error[E0277]: the trait bound `Cell<c_void>: std::marker::Copy` is not satisfied
    --> src/lib/xmalloc.rs:142:15
     |
142  |     dest[..n].copy_from_slice(&src[..n]);
     |               ^^^^^^^^^^^^^^^ the trait `std::marker::Copy` is not implemented for `Cell<c_void>`
     |
note: required by a bound in `core::slice::<impl [T]>::copy_from_slice`
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/slice/mod.rs:3216:12
     |
3216 |         T: Copy,
     |            ^^^^ required by this bound in `core::slice::<impl [T]>::copy_from_slice`

error[E0308]: mismatched types
    --> src/lib/xmalloc.rs:142:31
     |
142  |     dest[..n].copy_from_slice(&src[..n]);
     |               --------------- ^^^^^^^^^ expected struct `Cell`, found enum `c_void`
     |               |
     |               arguments to this function are incorrect
     |
     = note: expected reference `&[Cell<c_void>]`
                found reference `&[c_void]`
note: associated function defined here
    --> /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/slice/mod.rs:3214:12
     |
3214 |     pub fn copy_from_slice(&mut self, src: &[T])
     |            ^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:143:5
    |
143 |     dest
    |     ^^^^ expected enum `c_void`, found slice
    |
    = note: expected reference `&'h1 c_void`
               found reference `&[Cell<c_void>]`

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:150:17
    |
150 |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
    |          ------ ^^^^^^ expected `i8`, found slice `[i8]`
    |          |
    |          arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&'h0 [i8]`
note: function defined here
   --> src/lib/xmalloc.rs:18:8
    |
18  |     fn strlen(_: *const libc::c_char) -> libc::c_ulong;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:149:9
    |
148 |     return xmemdup(
    |            ------- arguments to this function are incorrect
149 |         string as *const libc::c_void,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[c_void]`, found *-ptr
    |
    = note: expected reference `&[c_void]`
             found raw pointer `*const c_void`
note: function defined here
   --> src/lib/xmalloc.rs:135:26
    |
135 | pub unsafe extern "C" fn xmemdup<'h0,'h1>(
    |                          ^^^^^^^
136 |     mut p: &'h0 [libc::c_void],
    |     --------------------------
137 |     mut s: size_t,
    |     -------------

error[E0308]: mismatched types
   --> src/lib/xmalloc.rs:148:12
    |
147 |   pub unsafe extern "C" fn xstrdup<'h0,'h1>(mut string: &'h0 [libc::c_char]) -> &'h1 libc::c_char {
    |                                                                                 ----------------- expected `&'h1 i8` because of return type
148 |       return xmemdup(
    |  ____________^
149 | |         string as *const libc::c_void,
150 | |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
151 | |     ) as *mut libc::c_char;
    | |__________________________^ expected `&i8`, found *-ptr
    |
    = note: expected reference `&'h1 i8`
             found raw pointer `*mut i8`

error[E0606]: casting `&'h0 [i8]` as `*const c_void` is invalid
   --> src/lib/xmalloc.rs:149:9
    |
149 |         string as *const libc::c_void,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0606]: casting `&c_void` as `*mut i8` is invalid
   --> src/lib/xmalloc.rs:148:12
    |
148 |       return xmemdup(
    |  ____________^
149 | |         string as *const libc::c_void,
150 | |         (strlen(string)).wrapping_add(1 as libc::c_int as libc::c_ulong),
151 | |     ) as *mut libc::c_char;
    | |__________________________^

error[E0308]: mismatched types
   --> src/trees.rs:414:34
    |
414 |     let mut tree: *mut ct_data = (*desc).dyn_tree;
    |                   ------------   ^^^^^^^^^^^^^^^^ types differ in mutability
    |                   |
    |                   expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[Cell<ct_data>]`

error[E0308]: mismatched types
   --> src/trees.rs:415:39
    |
415 |     let mut extra: *mut libc::c_int = (*desc).extra_bits;
    |                    ----------------   ^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut i32`
                 found reference `&[i32]`

error[E0308]: mismatched types
   --> src/trees.rs:419:35
    |
419 |     let mut stree: *mut ct_data = (*desc).static_tree;
    |                    ------------   ^^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[ct_data]`

error[E0308]: mismatched types
   --> src/trees.rs:550:34
    |
550 |     let mut tree: *mut ct_data = (*desc).dyn_tree;
    |                   ------------   ^^^^^^^^^^^^^^^^ types differ in mutability
    |                   |
    |                   expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[Cell<ct_data>]`

error[E0308]: mismatched types
   --> src/trees.rs:551:35
    |
551 |     let mut stree: *mut ct_data = (*desc).static_tree;
    |                    ------------   ^^^^^^^^^^^^^^^^^^^ types differ in mutability
    |                    |
    |                    expected due to this
    |
    = note: expected raw pointer `*mut ct_data`
                 found reference `&[ct_data]`

error[E0308]: mismatched types
   --> src/util.rs:558:37
    |
558 |     let mut r: libc::c_int = unlink(filename);
    |                              ------ ^^^^^^^^ expected `i8`, found slice `[i8]`
    |                              |
    |                              arguments to this function are incorrect
    |
    = note: expected raw pointer `*const i8`
                 found reference `&'h0 [i8]`
note: function defined here
   --> src/util.rs:11:8
    |
11  |     fn unlink(__name: *const libc::c_char) -> libc::c_int;
    |        ^^^^^^

error[E0308]: mismatched types
   --> src/util.rs:563:60
    |
563 |     let mut p: &[core::cell::Cell<libc::c_char>] = strrchr(name, '.' as i32);
    |                                                    ------- ^^^^ expected `i8`, found slice `[i8]`
    |                                                    |
    |                                                    arguments to this function are incorrect
    |
    = note:    expected raw pointer `*const i8`
            found mutable reference `&'h0 mut [i8]`
note: function defined here
   --> src/util.rs:19:8
    |
19  |     fn strrchr(_: *const libc::c_char, _: libc::c_int) -> *mut libc::c_char;
    |        ^^^^^^^

error[E0308]: mismatched types
   --> src/util.rs:563:52
    |
563 |     let mut p: &[core::cell::Cell<libc::c_char>] = strrchr(name, '.' as i32);
    |                ---------------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `&[Cell<i8>]`, found *-ptr
    |                |
    |                expected due to this
    |
    = note: expected reference `&[Cell<i8>]`
             found raw pointer `*mut i8`

error[E0599]: no method named `is_null` found for struct `Cell` in the current scope
   --> src/util.rs:564:16
    |
564 |     if &(p)[0].is_null() {
    |                ^^^^^^^ method not found in `Cell<i8>`

error[E0277]: can't compare `Cell<i8>` with `i8`
   --> src/util.rs:567:16
    |
567 |     if &(p)[0] == &(&*(name))[0] {
    |                ^^ no implementation for `Cell<i8> == i8`
    |
    = help: the trait `PartialEq<i8>` is not implemented for `Cell<i8>`
    = help: the trait `PartialEq` is implemented for `Cell<T>`
    = note: required because of the requirements on the impl of `PartialEq<&i8>` for `&Cell<i8>`

error[E0600]: cannot apply unary operator `-` to type `usize`
   --> src/util.rs:572:19
    |
572 |         p = &(p)[((-1) as usize) ..];
    |                   ^^^^
    |                   |
    |                   cannot apply unary operator `-`
    |                   help: you may have meant the maximum value of `usize`: `usize::MAX`
    |
    = note: unsigned values cannot be negated

error[E0599]: no method named `set` found for reference `&[Cell<i8>]` in the current scope
   --> src/util.rs:574:17
    |
574 |             (p).set('_' as i32 as libc::c_char);
    |                 ^^^
    |
   ::: /home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/pin.rs:659:12
    |
659 |     pub fn set(&mut self, value: P::Target)
    |            --- the method is available for `Pin<&mut &[Cell<i8>]>` here
    |
help: consider wrapping the receiver expression with the appropriate type
    |
574 |             Pin::new(&mut (p)).set('_' as i32 as libc::c_char);
    |             +++++++++++++    +
help: there is an associated function with a similar name
    |
574 |             (p).get('_' as i32 as libc::c_char);
    |                 ~~~

error[E0277]: can't compare `Cell<i8>` with `i8`
   --> src/util.rs:576:22
    |
576 |         if !(&(p)[0] != &(&*(name))[0]) {
    |                      ^^ no implementation for `Cell<i8> == i8`
    |
    = help: the trait `PartialEq<i8>` is not implemented for `Cell<i8>`
    = help: the trait `PartialEq` is implemented for `Cell<T>`
    = note: required because of the requirements on the impl of `PartialEq<&i8>` for `&Cell<i8>`

error[E0605]: non-primitive cast: `Option<&Cell<i8>>` as `i32`
   --> src/util.rs:573:12
    |
573 |         if (p).get(0) as libc::c_int == '.' as i32 {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^ an `as` expression can only be used to convert between primitive types or to coerce to a specific trait object

Some errors have detailed explanations: E0106, E0277, E0308, E0369, E0599, E0600, E0605, E0606.
For more information about an error, try `rustc --explain E0106`.
warning: `rust_dir` (lib) generated 7 warnings
error: could not compile `rust_dir` due to 139 previous errors; 7 warnings emitted

Caused by:
  process didn't exit successfully: `/home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/bin/cargo rustc --crate-name rust_dir --edition=2021 lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type staticlib --crate-type rlib --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 -C metadata=f91a9939a95dcc05 -C extra-filename=-f91a9939a95dcc05 --out-dir /home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps -C incremental=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/incremental -L dependency=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps --extern f128=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/libf128-98cbaa6913037a43.rmeta --extern libc=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/liblibc-a03fff7dee4d9130.rmeta -L native=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/build/f128_internal-bbb71a2e3b7f099c/out` (exit status: 1)
warning: build failed, waiting for other jobs to finish...
warning: `rust_dir` (lib test) generated 7 warnings (7 duplicates)
error: could not compile `rust_dir` due to 139 previous errors; 7 warnings emitted

Caused by:
  process didn't exit successfully: `/home/hzy/.rustup/toolchains/nightly-2022-08-08-x86_64-unknown-linux-gnu/bin/cargo rustc --crate-name rust_dir --edition=2021 lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 --test -C metadata=60b075d5db1f6ce6 -C extra-filename=-60b075d5db1f6ce6 --out-dir /home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps -C incremental=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/incremental -L dependency=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps --extern f128=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/libf128-98cbaa6913037a43.rmeta --extern libc=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/deps/liblibc-a03fff7dee4d9130.rmeta -L native=/home/hzy/workdir/rust/c2rust/examples/mycode/gzip/rust_dir/target/debug/build/f128_internal-bbb71a2e3b7f099c/out` (exit status: 1)
